# TON 智能合約開發介紹
## 引言
本文旨在提供一些理論知識，使得在 TON 上開發智能合約變得易懂，即使你以前從未接觸過區塊鏈開發。

### 什麼是區塊鏈
**區塊鏈**是一個由一系列包含有關系統中所有參與者進行的交易的區塊構成的連續鏈。

**區塊**是一種特殊的結構，用於記錄交易組。

在區塊鏈網路中，當交易與其他交易一起組成一個組並記錄在特殊的結構 —— 塊中時，該交易被視為已完成。

**鏈**表示每個塊在加密中引用其父對象。如果要更改塊中的資料，則必須更改所有後續塊的資料，這需要整個網路的同意。

每個新塊由網路上的每個計算機協調。這些計算機稱為「節點」。節點確保所有與區塊鏈進行交互的人都具有相同的資料。為了實現這種分佈式一致性，區塊鏈需要一種共識機制。

### 工作量證明
工作量證明（PoW）是一種分散式共識機制，要求網路參與者投入努力來解決隨機數學問題，以確保沒有人可以欺騙系統。

> 挖礦是解決此類問題以維護共識並獲得獎勵的過程。

### 權益證明
持股證明更改了使用硬幣所有者的計算機驗證塊的方式。持有者將他們的硬幣作為驗證塊的抵押品。

最終，當您向某人發送 TON 時，交易必須進行並包含在新塊中。然後，更新後的狀態傳遞給整個網路。

> TON 使用持股證明機制。

### 什麼是 TON 區塊鏈

TON 是一個分散式區塊鏈，其概念由 Telegram 團隊開發，在 2019 年，Telegram 團隊因被美國證券交易委員會禁止發行加密貨幣，從而無法繼續開發 TON 區塊鏈，但 TON 區塊鏈被轉移給獨立開發者社群 The Open Network，他們現在負責其發展。它擁有超快速的交易、低廉的手續費、易於使用的應用程式和生態友好性。

從技術上講，TON 網路是由虛擬機 [TVM](https://docs.ton.org/#/smart-contracts/tvm_overview) 組成的。TON 網路中的每個節點都存儲整個TON區塊鏈的狀態副本。此外，任何參與者都可以向該計算機傳送請求以執行任意計算。每當這樣的請求被傳送時，其他參與者會驗證、確認並執行該計算。此「執行」會觸發 TVM 中狀態的更改，該更改會被記錄並在整個網路中傳播。

計算請求稱為交易請求；所有交易和 TVM 的當前狀態都保存在區塊鏈中，該區塊鏈由所有節點保存和協調。

加密機制確保在交易被確認為有效並添加到區塊鏈後，它們無法更改。此外，這些機制確保所有交易都簽署並使用相應的「權限」執行。

> 值得注意的是，還有輕量級客戶端軟件可連接到完整節點以與區塊鏈互動。它們有助於用戶無需同步整個區塊鏈即可訪問和互動。

### 什麼是 TONcoin

TONcoin 是 TON 的加密貨幣。得益於 TONcoin 的存在，計算市場得以形成。這樣的市場為驗證和執行交易請求以及提供計算資源給網路的參與者提供了經濟激勵。

任何傳輸交易請求的參與者都必須支付 TONcoin 的費用。

### 什麼是智能合約
TVM 還允許執行某些代碼。應用程式開發人員將程式上傳到 TVM 結構中，而用戶使用不同的參數對這些代碼片段發出執行請求。在區塊鏈網路中，此類程式稱為智能合約。

任何開發人員都可以創建智能合約並將其發佈到網路中，支付網路費用。然後，任何用戶都可以調用智能合約以執行其代碼，同樣支付網路費用。

因此，通過智能合約，開發人員可以任意創建和部署複雜的用戶應用程式和服務，例如交易平台、金融工具、遊戲等。

> 值得注意的是，已發布的智能合約在網路中具有地址。

您可能聽說過代幣或 NFT，它們正是通過智能合約實現的。

### 智能合約作為應用程式的特點
智能合約有一些重要的特點：

- 區塊鏈中沒有消除合約代碼中可能存在的錯誤的機制，因此錯誤可能導致除了財務損失外，還可能導致項目 / 應用程式的關閉。
- 但是，有些開發人員會留下所謂的後門，即可以從發佈合約的地址更改合約。例如，大多數作為智能合約的穩定幣具有封鎖資金的功能。

> 後門 - 是開發人員故意嵌入算法中的特點，允許獲得未經授權的訪問資料或遠程管理操作系統和整個計算機。

因此，在使用任何智能合約之前，應該對其進行研究。

此外，在 TON 中，所有計算費用（總體上網路費用）都是以 gas 單位計價的。gas 單位的價格由該網路的配置確定。該文件可以由驗證器更改。
> 有關 gas 的更多資訊可以查看[這裡](https://docs.ton.org/#/smart-contracts/fees?id=gas)。

### 什麼是去中心化應用程式
去中心化應用程式（DApp）是由智能合約以及網站前端組成的應用程式。

去中心化交易所（DEX）是去中心化應用程式的一個例子。 DEX 是用於交易加密貨幣的應用程式，在這些應用程式中，交換和其他操作是通過智能合約而不是中央交易系統進行的。

換句話說，資產交換不是通過某個中央平台實現的，而是自動在網路中完成的。

### 測試網路或開發網路
為了測試智能合約，區塊鏈通常支持其網路的副本，即測試網路。

測試網路與主網路有兩個重要的區別：

- 測試網路的加密貨幣沒有價值，通常可以免費獲得少量加密貨幣進行智能合約測試。
- 測試網路有較少的節點，因為在測試網路中進行的操作較少。

在 TON 中，也有自己的[測試網路](https://ton.org/docs/#/testnet/)。

可以通過機器人獲得 TONcoin [測試網路幣](https://t.me/CryptoTestnetBot)，並可使用[測試網路的區塊鏈瀏覽器](https://testnet.tonscan.org)。

> 在 TON 上如果有人知道你的錢包地址，他們可以查看有關您交易的所有資訊。

### 區塊鏈瀏覽器
區塊鏈瀏覽器使用區塊鏈的 API 和節點從區塊鏈中提取各種資料，然後使用資料庫將所需的資料組織起來，並以可搜索的格式向用戶呈現資料。

這種軟件通常用於檢查交易是否成功，以及查看有關某個錢包的資訊。

如果有人知道你在 TON 上的錢包地址，他們可以查看有關您交易的所有資訊。

TON 的瀏覽器示例: https://tonscan.org/

### TON 的程式語言
TON 的智能合約運行在 TON 的虛擬機上。

對於智能合約開發，有低級別的語言 Fift 和高級別的語言 FunC。

未來還計劃推出一種高級語言 - [Tact](https://tact-lang.org/)。

### 通過 API 獲取有關 TON 的訊息
如果您想在不完全索引區塊鏈的情況下獲取區塊鏈中的任何訊息，則可以使用特殊的 API 服務，例如 TON 的這些服務:

https://tonapi.io/docs/
https://github.com/ton-foundation/ton-api-v4
https://toncenter.com/api/v2/

### 為什麼選擇 TON
大多數當今流行的區塊鏈都有以下問題之一：

- 高交易手續費（例如以太坊）
- 網路故障（例如 Solana）
- 中心化程度較低（例如 Ronin 和 Axie Infinity）
- 技術解決方案較弱，導致被駭客攻擊和資金損失（例如 Horizon 區塊鏈橋）
此外，許多區塊鏈只是在以太坊的基礎上進行了修改。

一眼看去，TON 似乎沒有這些問題，但這只有時間才能證明。

討論 TON 的優勢並不容易，因為這個主題需要深入研究 TON 的白皮書。但值得一提的是，TON 具有出色的性能：

- 可擴展性（處理大量互相交互的用戶的能力）
- 性能（區塊鏈性能指平台能否處理 “大量” 的智能合約）
- 區塊處理速度（區塊生成速度越快，用戶等待轉賬或智能合約執行的時間就越短。）

> 此外，手續費成本低也值得一提。白皮書是專門介紹該項目的詳細文檔。

要進一步比較 TON 與其他區塊鏈的差異，建議參考這篇文章：https://ton.org/analysis